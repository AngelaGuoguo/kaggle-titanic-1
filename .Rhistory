install.packages("ggplot2")
install.packages(ggplot2)
### Create randomForest model
# Goal:     (1) Construct basic randomForest models from the data
#           (2) Select the best model (Model selection)
#           (3) Save a prediction with our best randomForest
library(randomForest)
library(plyr)
# Load in the cleaned data sets
load("Data/train_clean.RData")  # 891 obs
load("Data/test_clean.RData")   # 418 obs
###
### Create randomForest model
###
# Create random forest based on PCLASS, SEX, and FARE
forest <- randomForest(survived ~ pclass + sex + fare + age + embarked, data = train,
ntree = 15000, importance = TRUE)
summary(forest)
# Extract the importance of each variable
importance(forest)
###
### Saving our model and prediction as a new CSV
###
# Make our prediction on the TRAIN data set [For calculating error]
train$survived_pred <- predict(forest, train)
# Make our prediction on the TEST data set
test$survived <- predict(forest, test)
# save csv file for submission
write.csv(test, "Submissions/randomForest-03.csv")
setwd("~/kaggle-titanic")
# Goal:     (1) Construct basic randomForest models from the data
#           (2) Select the best model (Model selection)
#           (3) Save a prediction with our best randomForest
library(randomForest)
library(plyr)
# Load in the cleaned data sets
load("Data/train_clean.RData")  # 891 obs
load("Data/test_clean.RData")   # 418 obs
###
### Create randomForest model
###
# Create random forest based on PCLASS, SEX, and FARE
forest <- randomForest(survived ~ pclass + sex + fare + age + embarked, data = train,
ntree = 15000, importance = TRUE)
summary(forest)
# Extract the importance of each variable
importance(forest)
###
### Saving our model and prediction as a new CSV
###
# Make our prediction on the TRAIN data set [For calculating error]
train$survived_pred <- predict(forest, train)
# Make our prediction on the TEST data set
test$survived <- predict(forest, test)
# save csv file for submission
write.csv(test, "Submissions/randomForest-03.csv")
# Goal: (1) Combine our three models into one prediction:
#             - randomForest
#             - SVM
#             - probit
# Source our models
source("2-randomForest.R")
source("3-SVM.R")
source("4-probit.R")
###
### Gather predictions
###
# randomForest
test$survived_rf <- predict(forest, test)
# SVM
test$survived_svm <- predict(svm.model, test, type = "response")
# Probit
test$survived_probit <- predict(probit, test)
test$survived_probit[test$survived >= 0.5] <- 1
test$survived_probit[test$survived < 0.5] <- 0
###
### Combine Predictions
###
which(test$survived_probit != test$survived_sm)
which(test$survived_probit != test$survived_svm)
test$survived_probit
0 + 1
1 + 1 0
test$survived_rf + test$survived_svm
as.numeric(test$survived_rf + test$survived_svm)
as.numeric(test$survived_rf) + as.numeric(test$survived_svm)
as.numeric(test$survived_svm)
test$survived_svm
as.integer(test$survived_svm)
as.numeric(test$survived_rf) + as.numeric(test$survived_svm)
?as.numeric
as.vector(test$survived_svm)
as.vector(test$survived_rf) + as.vector(test$survived_svm)
test$survived_rf
str(test$survived_rf)
test$survived_rf + test$survived_svm
as.numeric(test$survived_rf)
test$survived_svm
(test$survived_rf
as.numeric(test$survived_rf)
test$survived_rf
as.integer(test$survived_rf)
test$survived_svm
as.numeric(test$survived_svm)
as.numeric(test$survived_svm)
as.numeric(test$survived_rf)
test$survived_rf
combined <- as.numeric(test$survived_rf) +
as.numeric(test$survived_svm) +
as.numeric(test$survived_probit)
head(combined)
as.numeric(test$survived_probit)
test$survived_probit <- predict(probit, test)
test$survived_probit[test$survived >= 0.5] <- 2
test$survived_probit[test$survived < 0.5] <- 1
combined <- as.numeric(test$survived_rf) +
as.numeric(test$survived_svm) +
as.numeric(test$survived_probit)
head(combined)
table(combined)
###
### Combine Predictions
###
combined <- as.numeric(test$survived_rf) +
as.numeric(test$survived_svm) +
as.numeric(test$survived_probit)
# 3 is 0
# 4 is 0
# 5 is 1
# 6 is 1
combined[combined <= 4] <- 0
combined[combined >= 5] <- 1
# Make our ensamble prediction
test$survived <- combined
str(test$survived)
table(test$survived)
# Make our ensamble prediction
test$survived <- combined
write.csv(test, "Submissions/ensemble-01.csv")
write.csv(test, "Submissions/ensemble-01.csv")
